<mat-card>
  <h1>
    {{
      mode === "create"
        ? ("Create consumer" | translate)
        : ("Update Consumer" | translate)
    }}
  </h1>
  <mat-spinner *ngIf="isLoading"></mat-spinner>
  <form [formGroup]="form" *ngIf="!isLoading">
    <!-- First Name -->
    <mat-form-field>
      <input
        matInput
        placeholder="First Name"
        type="text"
        name="firstName"
        formControlName="firstName"
      />
      <!-- error -->
      <mat-error *ngIf="get('firstName').invalid && get('firstName').touched">
        <ng-container *ngFor="let errorMessage of errors('firstName')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Last Name -->
    <mat-form-field>
      <input
        matInput
        placeholder="Last Name"
        type="text"
        name="lastName"
        formControlName="lastName"
      />
      <!-- error -->
      <mat-error *ngIf="get('lastName').invalid && get('lastName').touched">
        <ng-container *ngFor="let errorMessage of errors('lastName')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Gender -->
    <div class="misc-bottom-padding">
      <mat-label>Gender:</mat-label>
      <mat-radio-group aria-label="Select an option" formControlName="gender">
        <mat-radio-button value="male">Male</mat-radio-button>
        <mat-radio-button value="female">Female</mat-radio-button>
      </mat-radio-group>
      <!-- error -->
      <!-- ToDo: Delete or make valid error -->
      <!-- <mat-error *ngIf="get('gender').invalid && get('gender').touched">
              <ng-container *ngFor="let errorMessage of errors('gender')">
                <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
              </ng-container>
            </mat-error> -->
    </div>

    <!-- Personal Id Number -->
    <mat-form-field>
      <input
        matInput
        placeholder="Personal Id Number"
        name="personalNumber"
        formControlName="personalNumber"
      />
      <!-- error -->
      <mat-error
        *ngIf="get('personalNumber').invalid && get('personalNumber').touched"
      >
        <ng-container *ngFor="let errorMessage of errors('personalNumber')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Phone -->
    <mat-form-field>
      <input
        matInput
        placeholder="Phone"
        type="tel"
        name="phone"
        formControlName="phone"
      />
      <!-- error -->
      <mat-error *ngIf="get('phone').invalid && get('phone').touched">
        <ng-container *ngFor="let errorMessage of errors('phone')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Address -->
    <mat-form-field>
      <input
        matInput
        placeholder="Address"
        type="text"
        name="address"
        formControlName="address"
      />
      <!-- error -->
      <mat-error *ngIf="get('address').invalid && get('address').touched">
        <ng-container *ngFor="let errorMessage of errors('address')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Country -->
    <mat-form-field>
      <input
        matInput
        placeholder="Country"
        type="text"
        name="country"
        formControlName="country"
      />
      <!-- error -->
      <mat-error *ngIf="get('country').invalid && get('country').touched">
        <ng-container *ngFor="let errorMessage of errors('country')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- City -->
    <mat-form-field>
      <input
        matInput
        placeholder="City"
        type="text"
        name="city"
        formControlName="city"
      />
      <!-- error -->
      <mat-error *ngIf="get('city').invalid && get('city').touched">
        <ng-container *ngFor="let errorMessage of errors('city')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Email -->
    <mat-form-field>
      <input
        matInput
        placeholder="Email"
        type="email"
        name="email"
        formControlName="email"
      />
      <!-- error -->
      <mat-error *ngIf="get('email').invalid && get('email').touched">
        <ng-container *ngFor="let errorMessage of errors('email')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </mat-error>
    </mat-form-field>

    <!-- Image -->
    <div>
      <button mat-stroked-button type="button" (click)="filePicker.click()">
        Pick Image
      </button>
      <input type="file" #filePicker (change)="onImagePicked($event)" />
    </div>
    <div
      class="image-preview"
      *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid"
    >
      <img [src]="imagePreview" [alt]="form.value.title" />
    </div>
    <div
      *ngIf="
        !(imagePreview !== '' && imagePreview && form.get('image').valid) &&
        consumer?.imagePath
      "
      class="image-preview"
    >
      <img [src]="consumer?.imagePath" [alt]="consumer.firstName" />
    </div>

    <!-- Submit -->
    <div class="button-wrapper">
      <button
        mat-raised-button
        color="accent"
        type="button"
        (click)="onSavePost()"
      >
        {{
          mode === "create"
            ? ("Save Consumer" | translate)
            : ("Update Consumer" | translate)
        }}
      </button>
      <!-- error -->
      <mat-error *ngIf="localFormError">
        <span>{{ localFormError }}</span>
      </mat-error>
    </div>
  </form>
</mat-card>
